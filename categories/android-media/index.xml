<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Android Media on 量子跳跃者</title><link>https://blog.ververv.com/categories/android-media/</link><description>Recent content in Android Media on 量子跳跃者</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 11 Mar 2020 07:58:58 +0800</lastBuildDate><atom:link href="https://blog.ververv.com/categories/android-media/index.xml" rel="self" type="application/rss+xml"/><item><title>Android多媒体框架</title><link>https://blog.ververv.com/p/android%E5%A4%9A%E5%AA%92%E4%BD%93%E6%A1%86%E6%9E%B6/</link><pubDate>Wed, 11 Mar 2020 07:58:58 +0800</pubDate><guid>https://blog.ververv.com/p/android%E5%A4%9A%E5%AA%92%E4%BD%93%E6%A1%86%E6%9E%B6/</guid><description>&lt;h2 id="框架">框架&lt;/h2>
&lt;p>从上往下&lt;/p>
&lt;ul>
&lt;li>MediaCodec&lt;/li>
&lt;li>StageFright API&lt;/li>
&lt;li>OpenOMX&lt;/li>
&lt;li>Driver&lt;/li>
&lt;/ul>
&lt;img src="https://img.toutiao.io/c/8086781b97029a098d78fe92995cd166" alt="img" style="zoom:50%;" />
&lt;h3 id="mediacodec">MediaCodec&lt;/h3>
&lt;p>MediaCodec 是提供给上层应用的 Java 接口。&lt;/p>
&lt;p>自 Android 4.1 （API 16) 引入的编解码接口，它是 Android 多媒体架构的一部分，通常和 MediaExtracto, MediaCrypto, Image, Surface, AudioTrack, MediaMuxer 一起使用。&lt;/p>
&lt;h3 id="stagefright">StageFright&lt;/h3>
&lt;p>StageFright 是 Android 平台预设的多媒体框架，自 Andorid 2.3 开始才被引入进来。&lt;/p>
&lt;blockquote>
&lt;p>最早 MediaCodec 调用的多媒体框架是 OpenCore，OpenCore 的优点是跨平台的，但是由于过于庞大和复杂，自 Android 2.3 开始 StageFright 正式加入&lt;/p>
&lt;/blockquote>
&lt;h3 id="openmax">OpenMAX&lt;/h3>
&lt;blockquote>
&lt;p>OpenMAX 全称是 Open Media Acceleration ( 开发多媒体加速器 )。&lt;/p>
&lt;/blockquote>
&lt;p>OpenMAX 为多媒体软硬开发提供了一套标准接口，OpenMAX 是为音视频，图像编解码而设计，许多嵌入式设备都使用了 OpenMAX 标准 ，比如 Android 平台。&lt;/p>
&lt;p>OpenMAX 标准定义了 DL，IL, AL 层：&lt;/p>
&lt;ul>
&lt;li>AL ( Application Layer 应用层 )&lt;/li>
&lt;li>IL ( Integration Layer 整合层 )&lt;/li>
&lt;li>DL（ Devlopment Layer 开发层 ）&lt;/li>
&lt;/ul>
&lt;h4 id="dl层">DL层&lt;/h4>
&lt;p>DL 层定义了音视频，图像处理接口，一般 DL 层由设备芯片厂商提供实现，并提供编解码器的功能。 在 Android 系统中，Google 提供了一些内置的软编解码器：&lt;/p>
&lt;p>&lt;em>1. OMX.google.h264.encoder,&lt;/em>&lt;/p>
&lt;p>&lt;em>2. OMX.google.h264.decoder,&lt;/em>&lt;/p>
&lt;p>&lt;em>3. OMX.google.acc.encoder,&lt;/em>&lt;/p>
&lt;p>&lt;em>4. OMX.google.acc.decoder&lt;/em>&lt;/p>
&lt;p>如果手机厂商需要提供硬编解码器就需要实现 DL 层。&lt;/p>
&lt;p>当设备芯片厂商开发完成编解码器后, 会将编解码器信息注册到 &lt;em>system/etc/media_codecs.xml&lt;/em> 和 &lt;em>system/etc/media_profiles.xml&lt;/em> 文件中，我们可以通过分析这两个文件获取当前设备所有的编解码器列表，解析解码器最大支持的视频宽高等信息。&lt;/p>
&lt;p>可以通过adb获取&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">adb pull /system/etc/media_codecs.xml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adb pull /system/etc/media_profiles.xml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="参考">参考&lt;/h2>
&lt;p>[MediaCodec/OpenMAX/StageFright 介绍（Android）](MediaCodec/OpenMAX/StageFright 介绍（Android）)&lt;/p></description></item></channel></rss>