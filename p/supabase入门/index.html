<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="价格 官方文档 官方文档2 实例类型和费用 Size Cost Per Hour Estimated Monthly Cost Starter $0.01344 ~$10 Small $0.0206 ~$15 Medium $0.0822 ~$60 Large $0.1517 ~$110 XL $0.2877 ~$210 2XL $0.562 ~$410 4XL $1.32 ~$960 8XL $2.562 ~$1870 12XL $3.836 ~$2800 16XL $5.12 ~$3730 Plan Hourly Price USD Monthly Price USD CPU Memory Connections: Pooler Recommended Maximum DB Size"><title>Supabase入门</title>
<link rel=canonical href=https://blog.ververv.com/p/supabase%E5%85%A5%E9%97%A8/><link rel=stylesheet href=/scss/style.min.d8118f156935b64eca93aca758476adca858d2c47354971654d9bd2933a0e45f.css><meta property='og:title' content="Supabase入门"><meta property='og:description' content="价格 官方文档 官方文档2 实例类型和费用 Size Cost Per Hour Estimated Monthly Cost Starter $0.01344 ~$10 Small $0.0206 ~$15 Medium $0.0822 ~$60 Large $0.1517 ~$110 XL $0.2877 ~$210 2XL $0.562 ~$410 4XL $1.32 ~$960 8XL $2.562 ~$1870 12XL $3.836 ~$2800 16XL $5.12 ~$3730 Plan Hourly Price USD Monthly Price USD CPU Memory Connections: Pooler Recommended Maximum DB Size"><meta property='og:url' content='https://blog.ververv.com/p/supabase%E5%85%A5%E9%97%A8/'><meta property='og:site_name' content='量子跳跃者'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2023-12-18T13:34:19+08:00'><meta property='article:modified_time' content='2023-12-18T13:34:19+08:00'><meta name=twitter:title content="Supabase入门"><meta name=twitter:description content="价格 官方文档 官方文档2 实例类型和费用 Size Cost Per Hour Estimated Monthly Cost Starter $0.01344 ~$10 Small $0.0206 ~$15 Medium $0.0822 ~$60 Large $0.1517 ~$110 XL $0.2877 ~$210 2XL $0.562 ~$410 4XL $1.32 ~$960 8XL $2.562 ~$1870 12XL $3.836 ~$2800 16XL $5.12 ~$3730 Plan Hourly Price USD Monthly Price USD CPU Memory Connections: Pooler Recommended Maximum DB Size"><link rel="shortcut icon" href=/favicon.png><script defer src=https://analytics.ververv.com/pixel/tABAb34VvSTV05V2></script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky compact"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><div class=site-meta><h1 class=site-name><a href=/>量子跳跃者</a></h1><h2 class=site-description></h2></div></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/ target=_blank><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>暗色模式</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">目录</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#实例类型和费用>实例类型和费用</a></li><li><a href=#免费套餐>免费套餐</a></li><li><a href=#pro套餐httpssupabasecompricing><a href=https://supabase.com/pricing>Pro套餐</a></a></li><li><a href=#定价方式>定价方式</a></li><li><a href=#对比vercel的数据库>对比Vercel的数据库</a></li></ol><ol><li><a href=#安装cli>安装CLI</a></li><li><a href=#获取连接信息>获取连接信息</a></li><li><a href=#启用扩展>启用扩展</a></li><li><a href=#查看函数>查看函数</a></li><li><a href=#安装javascript-sdk>安装Javascript SDK</a></li></ol><ol><li><a href=#索引httpssupabasecomdocsguidesaivector-indexes><a href=https://supabase.com/docs/guides/ai/vector-indexes>索引</a></a></li></ol><ol><li><a href=#配置数据库>配置数据库</a></li><li><a href=#获取supbabase-api-key>获取SupbaBase API Key</a></li><li><a href=#安装库>安装库</a></li><li><a href=#基本用法>基本用法</a></li><li><a href=#混合搜索>混合搜索</a></li><li><a href=#simple-metadata-filtering>Simple metadata filtering</a></li><li><a href=#advanced-metadata-filtering>Advanced metadata filtering</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/supabase%E5%85%A5%E9%97%A8/>Supabase入门</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Dec 18, 2023</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>阅读时长: 7 分钟</time></div></footer></div></header><section class=article-content><h1 id=价格>价格</h1><p><a class=link href=https://www.restack.io/docs/supabase-knowledge-supabase-cost-analysis target=_blank rel=noopener>官方文档</a></p><p><a class=link href=https://supabase.com/docs/guides/platform/org-based-billing target=_blank rel=noopener>官方文档2</a></p><h2 id=实例类型和费用>实例类型和费用</h2><div class=table-wrapper><table><thead><tr><th>Size</th><th>Cost Per Hour</th><th>Estimated Monthly Cost</th></tr></thead><tbody><tr><td>Starter</td><td>$0.01344</td><td>~$10</td></tr><tr><td>Small</td><td>$0.0206</td><td>~$15</td></tr><tr><td>Medium</td><td>$0.0822</td><td>~$60</td></tr><tr><td>Large</td><td>$0.1517</td><td>~$110</td></tr><tr><td>XL</td><td>$0.2877</td><td>~$210</td></tr><tr><td>2XL</td><td>$0.562</td><td>~$410</td></tr><tr><td>4XL</td><td>$1.32</td><td>~$960</td></tr><tr><td>8XL</td><td>$2.562</td><td>~$1870</td></tr><tr><td>12XL</td><td>$3.836</td><td>~$2800</td></tr><tr><td>16XL</td><td>$5.12</td><td>~$3730</td></tr></tbody></table></div><div class=table-wrapper><table><thead><tr><th>Plan</th><th>Hourly Price USD</th><th>Monthly Price USD</th><th>CPU</th><th>Memory</th><th>Connections: Pooler</th><th>Recommended Maximum DB Size</th></tr></thead><tbody><tr><td>Micro/Starter</td><td>$0.01344</td><td>~$10</td><td>2-core ARM (shared)</td><td>1 GB</td><td>200</td><td>10GB</td></tr><tr><td>Small</td><td>$0.0206</td><td>~$15</td><td>2-core ARM (shared)</td><td>2 GB</td><td>200</td><td>50GB</td></tr><tr><td>Medium</td><td>$0.0822</td><td>~$60</td><td>2-core ARM (shared)</td><td>4 GB</td><td>200</td><td>100GB</td></tr><tr><td>Large</td><td>$0.1517</td><td>~$110</td><td>2-core ARM (dedicated)</td><td>8 GB</td><td>300</td><td>200GB</td></tr><tr><td>XL</td><td>$0.2877</td><td>~$210</td><td>4-core ARM (dedicated)</td><td>16 GB</td><td>700</td><td>500GB</td></tr></tbody></table></div><h2 id=免费套餐>免费套餐</h2><ul><li>可以创建2个组织</li><li>每个组织都能够免费运行一个Starter实例</li><li>实例在一周不活动后暂停</li></ul><h2 id=pro套餐httpssupabasecompricing><a class=link href=https://supabase.com/pricing target=_blank rel=noopener>Pro套餐</a></h2><blockquote><p>每个月有10美元的Credit，不会转到下个月。</p></blockquote><p>25美元一个月，相比免费，增加的功能：</p><ol><li><strong>不暂停项目</strong>：与免费计划中项目在一周不活动后暂停不同，专业计划中的项目不会因为不活动而暂停。</li><li><strong>每日备份且保存7天</strong>：专业计划提供更全面的数据保护，每天进行备份，并保留7天。</li><li><strong>增加的数据库空间</strong>：专业计划包含8GB的数据库空间，相较于免费计划的500MB。</li><li><strong>增加的文件存储空间</strong>：提供100GB的文件存储空间，远高于免费计划的1GB。</li><li><strong>增加的带宽</strong>：提供250GB的带宽，相比免费计划的5GB。</li><li><strong>更大的文件上传限制</strong>：支持最多5GB的文件上传，而免费计划限制为50MB。</li><li><strong>更多的月活跃用户</strong>：支持最多100,000的月活跃用户，超过免费计划的50,000。</li><li><strong>更多的Edge Function调用</strong>：包含最多2M的Edge Function调用，相比免费计划的500K。</li><li><strong>更多的并发实时连接</strong>：支持最多500个并发实时连接，免费计划中为200个。</li><li><strong>更多的实时消息</strong>：包含最多500万的实时消息，免费计划为200万。</li><li><strong>延长的日志保留时间</strong>：日志保留时间为7天，相较于免费计划的1天。</li><li><strong>电子邮件支持</strong>：提供电子邮件客户支持，而免费计划只提供社区支持。</li></ol><div class=table-wrapper><table><thead><tr><th>特点</th><th>免费计划</th><th>专业计划</th></tr></thead><tbody><tr><td>适用性</td><td>个人爱好项目和简单网站</td><td>生产应用程序，提供扩展选项</td></tr><tr><td>价格</td><td>$0 / 月 / 组织</td><td>从 $25 / 月 / 组织起</td></tr><tr><td>组织数量限制</td><td>最多2个免费组织</td><td>无</td></tr><tr><td>API请求</td><td>无限</td><td>无限</td></tr><tr><td>社交OAuth提供者</td><td>有</td><td>有</td></tr><tr><td>数据库空间</td><td>最多500MB</td><td>8GB包含</td></tr><tr><td>文件存储</td><td>最多1GB</td><td>100GB包含</td></tr><tr><td>带宽</td><td>最多5GB</td><td>250GB包含</td></tr><tr><td>文件上传</td><td>最多50MB</td><td>5GB包含</td></tr><tr><td>月活跃用户</td><td>最多50,000</td><td>100,000包含</td></tr><tr><td>Edge Function调用</td><td>最多500K</td><td>2M包含</td></tr><tr><td>并发实时连接</td><td>最多200</td><td>500包含</td></tr><tr><td>实时消息</td><td>最多200万</td><td>500万包含</td></tr><tr><td>日志保留</td><td>1天</td><td>7天</td></tr><tr><td>支持</td><td>社区</td><td>电子邮件</td></tr><tr><td>项目暂停</td><td>1周不活跃后暂停</td><td>无</td></tr><tr><td>备份</td><td>无</td><td>每天备份，保存7天</td></tr><tr><td>成本控制</td><td>不适用</td><td>允许根据设置决定是否接受超额使用</td></tr></tbody></table></div><h2 id=定价方式>定价方式</h2><p>每个新 Supabase 项目的默认实例是 Starter Compute 实例，可以随时通过项目设置进行升级。</p><p>Supabase 计算定价基于运行时小时数，这意味着您需要为实例处于活动状态的时间付费，而<strong>不是为暂停的项目付费</strong>。</p><h2 id=对比vercel的数据库>对比Vercel的数据库</h2><ul><li><a class=link href=https://vercel.com/docs/storage/vercel-kv target=_blank rel=noopener>Vercel KV</a>: Durable Redis</li><li><a class=link href=https://vercel.com/docs/storage/vercel-postgres target=_blank rel=noopener>Vercel Postgres</a>: Serverless SQL</li><li><a class=link href=https://vercel.com/docs/storage/vercel-blob target=_blank rel=noopener>Vercel Blob</a>: Large file storage</li><li><a class=link href=https://vercel.com/docs/storage/edge-config target=_blank rel=noopener>Vercel Edge Config</a>: Global, low-latency data store</li></ul><p><strong>对比Vercel Postgres</strong></p><p><a class=link href=https://www.reddit.com/r/nextjs/comments/13oksux/vercel_postgres_vs_supabase/ target=_blank rel=noopener>Vercel Postgres vs Supabase?</a></p><p><strong>Vercel Postgres 优点</strong></p><ol><li><strong>与 Vercel 平台集成：</strong> 作为 Vercel 产品，它与其他 Vercel 服务的无缝集成。</li></ol><p>Vercel Postgres 缺点</p><ol><li><strong>扩展和功能有限：</strong> 与 Supabase 相比，它缺乏某些 Postgres 扩展和功能。</li><li><strong>成本：</strong> 对于大规模应用来说，它被认为更昂贵。</li><li><strong>测试阶段：</strong> 根据讨论，它仍处于测试阶段，可能不适合生产环境。</li></ol><p>Supabase 优点</p><ol><li><strong>更多功能，更低成本：</strong> Supabase 以更低的价格提供更广泛的功能。</li><li><strong>开箱即用的认证：</strong> 用户赞赏内置的认证功能，认为非常有效。</li><li><strong>可扩展性：</strong> Supabase 支持各种扩展，如 PostGIS、TIMESCALEDB、PGROONGA、PG_CRON、PgVector 等，这些都已准备好并且易于启用。</li><li><strong>易用性：</strong> 用户发现 Supabase 易于使用，文档和资源良好。</li><li><strong>社区支持：</strong> Supabase 社区似乎活跃且支持。</li></ol><p>Supabase 缺点</p><ol><li><strong>行级安全（RLS）的担忧：</strong> 一些用户对 Supabase 中 RLS 的默认设置表示担忧，这需要仔细管理以确保表的安全。</li><li><strong>数据库直接访问：</strong> Supabase 允许从浏览器/客户端直接访问数据库，这要求用户在保护表格方面要小心。</li></ol><p>一般观察</p><ol><li><strong>社区偏好：</strong> Next.js 社区似乎更喜欢 Supabase，提到其功能和定价。</li><li><strong>适用性：</strong> 在 Vercel Postgres 和 Supabase 之间的选择可能取决于项目的特定需求和规模。</li><li><strong>Supabase 适合初学者，Neon 适合高级用户：</strong> 对于数据库管理新手来说，推荐使用 Supabase，而更高级的用户可能更喜欢 Neon（与 Vercel Postgres 相关）。</li></ol><p><strong>结论</strong></p><p>Vercel Postgres 和 Supabase 都有各自的优点和缺点。选择主要取决于项目的具体要求，如对某些 Postgres 扩展的需求、预算限制以及与 Vercel 生态系统集成的期望程度。社区中 Supabase 似乎是更受欢迎的选择，特别是因为其功能丰富和性价比高。</p><h1 id=常用操作>常用操作</h1><h2 id=安装cli>安装CLI</h2><blockquote><p><a class=link href=https://supabase.com/docs/guides/cli/getting-started target=_blank rel=noopener>链接</a></p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>brew install supabase/tap/supabase
</span></span></code></pre></td></tr></table></div></div><h2 id=获取连接信息>获取连接信息</h2><p>获取连接信息</p><p><strong>Migration connection string</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>postgresql</span><span class=p>:</span><span class=o>//</span><span class=n>postgres</span><span class=p>:[</span><span class=n>YOUR</span><span class=o>-</span><span class=n>PASSWORD</span><span class=p>]</span><span class=o>@</span><span class=n>db</span><span class=p>.</span><span class=n>vtczmwiywtazaaanrfrg</span><span class=p>.</span><span class=n>supabase</span><span class=p>.</span><span class=n>co</span><span class=p>:</span><span class=mi>5432</span><span class=o>/</span><span class=n>postgres</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>对应下图的序号4</li><li>运维：平时管理数据库，不用考虑性能</li><li>使用postgresql当协议名</li></ul><p><strong>Application connection string</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>postgres</span><span class=p>:</span><span class=o>//</span><span class=n>postgres</span><span class=p>.</span><span class=n>vtczmwiywtazaaanrfrg</span><span class=p>:[</span><span class=n>YOUR</span><span class=o>-</span><span class=n>PASSWORD</span><span class=p>]</span><span class=o>@</span><span class=n>aws</span><span class=o>-</span><span class=mi>0</span><span class=o>-</span><span class=n>us</span><span class=o>-</span><span class=n>west</span><span class=o>-</span><span class=mi>1</span><span class=p>.</span><span class=n>pooler</span><span class=p>.</span><span class=n>supabase</span><span class=p>.</span><span class=n>com</span><span class=p>:</span><span class=mi>6543</span><span class=o>/</span><span class=n>postgres</span><span class=o>?</span><span class=n>pgbouncer</span><span class=o>=</span><span class=k>true</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><ul><li>对应下图的序号5</li><li>应用：需要考虑性能</li><li>使用postgres当协议名</li><li>主机名有aws的字眼</li><li>supabase返回的值没有，是我手动添加：pgbouncer=true</li><li><code>pgbouncer=true</code> 表明连接应该通过 PgBouncer 进行管理。使用 PgBouncer 可以提高性能和资源效率，因为它减少了创建和维护每个新数据库连接所需的开销。它通过重用现有连接来实现这一点。</li></ul><p><img src=https://cdn.jsdelivr.net/gh/haibinyang/img@main/picgo/image-20240107144757114.png loading=lazy alt=image-20240107144757114></p><h2 id=启用扩展>启用扩展</h2><p>点击<a class=link href=https://supabase.com/dashboard/project/_/database/tables target=_blank rel=noopener>这里</a></p><p>搜索Vector</p><h2 id=查看函数>查看函数</h2><ol><li>登录到你的 Supabase 项目。</li><li>在侧边栏中，点击“数据库”来打开数据库管理页面。</li><li>选择“模式”视图，在这里你可以浏览不同</li></ol><img src=https://cdn.jsdelivr.net/gh/haibinyang/img@main/picgo/image-20240301184349762.png alt=image-20240301184349762 style=zoom:50%><h2 id=安装javascript-sdk>安装Javascript SDK</h2><blockquote><p><a class=link href=https://supabase.com/docs/reference/javascript/installing target=_blank rel=noopener>SDK文档</a></p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>npm install @supabase/supabase-js
</span></span></code></pre></td></tr></table></div></div><h1 id=supabase与向量数据库ai>SupaBase与向量数据库/AI</h1><p><a class=link href=https://supabase.com/docs/guides/ai target=_blank rel=noopener>官网</a></p><h2 id=索引httpssupabasecomdocsguidesaivector-indexes><a class=link href=https://supabase.com/docs/guides/ai/vector-indexes target=_blank rel=noopener>索引</a></h2><p>Currently vectors with up to 2,000 dimensions can be indexed.</p><p>但OpenAI的text-embedding-3-large已经是3072维度了。</p><div class=table-wrapper><table><thead><tr><th style=text-align:left>模型名称</th><th style=text-align:left>描述</th><th style=text-align:left>向量大小</th><th>价格</th></tr></thead><tbody><tr><td style=text-align:left>text-embedding-3-large</td><td style=text-align:left>适合非英文的任务。</td><td style=text-align:left>3,072</td><td>比ada稍微多点</td></tr><tr><td style=text-align:left>text-embedding-3-small</td><td style=text-align:left>text-embedding-ada-002的升级版本。</td><td style=text-align:left>1,536</td><td>是ada的1/5</td></tr><tr><td style=text-align:left>text-embedding-ada-002</td><td style=text-align:left></td><td style=text-align:left>1,536</td><td></td></tr></tbody></table></div><p>不需要索引的情况</p><p>There are a couple of cases where you might not need indexes:</p><ul><li>You have a small dataset and don&rsquo;t need to scale it.</li><li>You are not expecting high amounts of vector search queries per second.</li><li>You need to guarantee 100% accuracy.（需要准确性：看来索引会降低准确性）。</li></ul><p>使用索引将导致准确性降低，因为您要用近似 （ANN） 搜索替换精确 （KNN） 搜索。</p><p>KNN是精确搜索。</p><p>Prefer <code>inner-product</code> to <code>L2</code> or <code>Cosine</code> distances if your vectors are normalized (like <code>text-embedding-ada-002</code>).</p><h1 id=supabase与langchain>Supabase与LangChain</h1><p>LangChain的<a class=link href=https://js.langchain.com/docs/integrations/vectorstores/supabase target=_blank rel=noopener>教程</a></p><p>SupbaBase<a class=link href=https://supabase.com/docs/guides/ai/langchain#hybrid-search target=_blank rel=noopener>关于LangChain的文档</a></p><p>LangChain支持<a class=link href=https://js.langchain.com/docs/integrations/retrievers/supabase-hybrid target=_blank rel=noopener>Supabase混合检索</a></p><h2 id=配置数据库>配置数据库</h2><p><a class=link href=https://supabase.com/docs/guides/ai/langchain#hybrid-search target=_blank rel=noopener>教程</a></p><p><strong>两种方式：</strong></p><ul><li>在Dashboard的SQL Editor中找到LangChain模板（如下）</li><li>使用SupaBase CLI工具执行SQL语句</li></ul><img src=https://cdn.jsdelivr.net/gh/haibinyang/img@main/picgo/image-20240301180618778.png alt=image-20240301180618778 style=zoom:50%><p><strong>基本原理</strong></p><ul><li>启用vector插件</li><li>创建数据库表documents</li><li>创建查询函数match_documents</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Enable the pgvector extension to work with embedding vectors
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=n>extension</span><span class=w> </span><span class=n>vector</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Create a table to store your documents
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=n>documents</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>id</span><span class=w> </span><span class=n>bigserial</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>content</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w> </span><span class=c1>-- corresponds to Document.pageContent
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>metadata</span><span class=w> </span><span class=n>jsonb</span><span class=p>,</span><span class=w> </span><span class=c1>-- corresponds to Document.metadata
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>  </span><span class=n>embedding</span><span class=w> </span><span class=n>vector</span><span class=p>(</span><span class=mi>1536</span><span class=p>)</span><span class=w> </span><span class=c1>-- 1536 works for OpenAI embeddings, change if needed
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-- Create a function to search for documents
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>function</span><span class=w> </span><span class=n>match_documents</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=err>……</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>$$</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h2 id=获取supbabase-api-key>获取SupbaBase API Key</h2><ul><li><strong><code>NEXT_PUBLIC_SUPABASE_URL</code></strong>: 这是你的Supabase项目的API URL。你可以在项目仪表板的<code>Settings</code> -> <code>API</code>部分找到它。这个URL通常看起来像 <code>https://xyzcompany.supabase.co</code>。</li><li><strong><code>NEXT_PUBLIC_SUPABASE_ANON_KEY</code></strong>: 这是你的Supabase项目的匿名公钥。它允许未经身份验证的用户访问你的数据库，但只能访问你在表格权限中明确允许的数据。这个键同样可以在<code>Settings</code> -> <code>API</code>部分找到。</li><li><strong><code>SUPABASE_SERVICE_ROLE_KEY</code></strong>: 这是服务角色密钥，它提供了对你的Supabase项目的完全访问权限，应当小心使用。你也可以在<code>Settings</code> -> <code>API</code>部分找到它，但请注意，它是高权限的密钥，不应该公开或在客户端代码中使用。</li></ul><img src=https://cdn.jsdelivr.net/gh/haibinyang/img@main/picgo/image-20240301180503434.png alt=image-20240301180503434 style=zoom:50%><h2 id=安装库>安装库</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pnpm add @supabase/supabase-js
</span></span><span class=line><span class=cl>pnpm add @langchain/openai @langchain/community
</span></span></code></pre></td></tr></table></div></div><h2 id=基本用法>基本用法</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>SupabaseVectorStore</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;langchain/vectorstores/supabase&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>OpenAIEmbeddings</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;langchain/embeddings/openai&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createClient</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@supabase/supabase-js&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>supabaseKey</span> <span class=o>=</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>SUPABASE_SERVICE_ROLE_KEY</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>supabaseKey</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`Expected SUPABASE_SERVICE_ROLE_KEY`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>SUPABASE_URL</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>url</span><span class=p>)</span> <span class=k>throw</span> <span class=k>new</span> <span class=nb>Error</span><span class=p>(</span><span class=sb>`Expected env var SUPABASE_URL`</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>run</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=nx>createClient</span><span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>supabaseKey</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>vectorStore</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>SupabaseVectorStore</span><span class=p>.</span><span class=nx>fromTexts</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=s1>&#39;Hello world&#39;</span><span class=p>,</span> <span class=s1>&#39;Bye bye&#39;</span><span class=p>,</span> <span class=s2>&#34;What&#39;s this?&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>[{</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>2</span> <span class=p>},</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>1</span> <span class=p>},</span> <span class=p>{</span> <span class=nx>id</span><span class=o>:</span> <span class=mi>3</span> <span class=p>}],</span>
</span></span><span class=line><span class=cl>    <span class=k>new</span> <span class=nx>OpenAIEmbeddings</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>client</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>tableName</span><span class=o>:</span> <span class=s1>&#39;documents&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>queryName</span><span class=o>:</span> <span class=s1>&#39;match_documents&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>resultOne</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>vectorStore</span><span class=p>.</span><span class=nx>similaritySearch</span><span class=p>(</span><span class=s1>&#39;Hello world&#39;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>resultOne</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=混合搜索>混合搜索</h2><blockquote><p><a class=link href=https://js.langchain.com/docs/integrations/retrievers/supabase-hybrid/ target=_blank rel=noopener>官方教程</a></p></blockquote><p>在SupaBase增加函数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=c1>-- Create a function to keyword search for documents
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>create</span><span class=w> </span><span class=k>function</span><span class=w> </span><span class=n>kw_match_documents</span><span class=p>(</span><span class=n>query_text</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w> </span><span class=n>match_count</span><span class=w> </span><span class=nb>int</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>returns</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=nb>bigint</span><span class=p>,</span><span class=w> </span><span class=n>content</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w> </span><span class=n>metadata</span><span class=w> </span><span class=n>jsonb</span><span class=p>,</span><span class=w> </span><span class=n>similarity</span><span class=w> </span><span class=nb>real</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>as</span><span class=w> </span><span class=err>$$</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>begin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>return</span><span class=w> </span><span class=n>query</span><span class=w> </span><span class=k>execute</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>format</span><span class=p>(</span><span class=s1>&#39;select id, content, metadata, ts_rank(to_tsvector(content), plainto_tsquery($1)) as similarity
</span></span></span><span class=line><span class=cl><span class=s1>from documents
</span></span></span><span class=line><span class=cl><span class=s1>where to_tsvector(content) @@ plainto_tsquery($1)
</span></span></span><span class=line><span class=cl><span class=s1>order by similarity desc
</span></span></span><span class=line><span class=cl><span class=s1>limit $2&#39;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>using</span><span class=w> </span><span class=n>query_text</span><span class=p>,</span><span class=w> </span><span class=n>match_count</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>end</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=err>$$</span><span class=w> </span><span class=k>language</span><span class=w> </span><span class=n>plpgsql</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>检索</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>SupabaseHybridSearch</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;@langchain/community/retrievers/supabase&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>OpenAIEmbeddings</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;langchain/embeddings/openai&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>createClient</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;@supabase/supabase-js&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>supabaseKey</span> <span class=o>=</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>SUPABASE_SERVICE_ROLE_KEY</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=nx>process</span><span class=p>.</span><span class=nx>env</span><span class=p>.</span><span class=nx>NEXT_PUBLIC_SUPABASE_URL</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>run</span> <span class=o>=</span> <span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>client</span> <span class=o>=</span> <span class=nx>createClient</span><span class=p>(</span><span class=nx>url</span><span class=p>,</span> <span class=nx>supabaseKey</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>embeddings</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>OpenAIEmbeddings</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>retriever</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>SupabaseHybridSearch</span><span class=p>(</span><span class=nx>embeddings</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>client</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>similarityK</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>keywordK</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>tableName</span><span class=o>:</span> <span class=s2>&#34;documents&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>similarityQueryName</span><span class=o>:</span> <span class=s2>&#34;match_documents&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>keywordQueryName</span><span class=o>:</span> <span class=s2>&#34;kw_match_documents&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>results</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>retriever</span><span class=p>.</span><span class=nx>getRelevantDocuments</span><span class=p>(</span><span class=s2>&#34;hello bye&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>results</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>run</span><span class=p>();</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>响应</strong></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>  Document <span class=o>{</span> pageContent: <span class=s1>&#39;Bye bye&#39;</span>, metadata: <span class=o>{</span> id: <span class=m>1</span> <span class=o>}</span> <span class=o>}</span>,
</span></span><span class=line><span class=cl>  Document <span class=o>{</span> pageContent: <span class=s1>&#39;Hello world&#39;</span>, metadata: <span class=o>{</span> id: <span class=m>2</span> <span class=o>}</span> <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=simple-metadata-filtering>Simple metadata filtering</h2><p><a class=link href="https://supabase.com/docs/guides/ai/langchain?database-method=sql#simple-metadata-filtering" target=_blank rel=noopener>https://supabase.com/docs/guides/ai/langchain?database-method=sql#simple-metadata-filtering</a></p><h2 id=advanced-metadata-filtering>Advanced metadata filtering</h2><p><a class=link href="https://supabase.com/docs/guides/ai/langchain?database-method=sql#simple-metadata-filtering" target=_blank rel=noopener>https://supabase.com/docs/guides/ai/langchain?database-method=sql#simple-metadata-filtering</a></p><h1 id=supabase与nextjs>Supabase与Next.js</h1><p>N/A</p></section><footer class=article-footer><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><div id=cusdis_thread data-host=https://cusdis.com data-app-id=287ed0fd-6a12-4302-a1ad-d2fd382e1199 data-page-id=50e449d68e566e8c87e00b75feced62a data-page-url=https://blog.ververv.com/p/supabase%E5%85%A5%E9%97%A8/ data-page-title=Supabase入门></div><script async defer src=https://cusdis.com/js/cusdis.es.js></script><script>function setCusdisTheme(e){let t=document.querySelector("#cusdis_thread iframe");t&&window.CUSDIS.setTheme(e)}window.addEventListener("onColorSchemeChange",e=>{setCusdisTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2023 -
2024 量子跳跃者</section><section class=powerby>使用 <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> 构建<br>主题 <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.24.2>Stack</a></b> 由 <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> 设计</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>